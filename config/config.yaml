# Poke Bowl Inventory System Configuration
# Production configuration for Jetson Orin Nano deployment

# USB Camera Settings
camera:
  # V4L2 device index (0 = /dev/video0, 1 = /dev/video1, etc.)
  index: 0
  
  # Resolution (adjust based on your camera's native resolution)
  width: 1280
  height: 720
  
  # Target frames per second
  fps: 30

# YOLO Detector Settings
detector:
  # Path to trained model (relative to project root or absolute path)
  model_path: best.pt
  
  # Confidence threshold (0.0 to 1.0)
  # Lower = more detections (more false positives)
  # Higher = fewer detections (more false negatives)
  conf_threshold: 0.25
  
  # IoU threshold for Non-Maximum Suppression (0.0 to 1.0)
  # Lower = more aggressive filtering of overlapping boxes
  # Higher = allows more overlapping detections
  iou_threshold: 0.45
  
  # Input image size for YOLO (should match training)
  # Common values: 320, 416, 640, 1280
  imgsz: 640
  
  # CUDA device ('0' for GPU, 'cpu' for CPU)
  # On Jetson, use '0' for GPU acceleration
  device: '0'
  
  # Enable FP16 half precision (recommended for Jetson)
  # Reduces memory usage and increases speed with minimal accuracy loss
  half: true

# Inventory Tracking Settings
inventory:
  # Number of frames to use for temporal smoothing
  # Higher = more stable counts but slower response to changes
  # Lower = faster response but more noise
  smoothing_window: 10
  
  # Smoothing method: 'median', 'mean', or 'mode'
  # - median: Best for removing outliers (recommended)
  # - mean: Smooth averaging
  # - mode: Most common value
  smoothing_method: median
  
  # Persistence settings (SQLite database)
  enable_persistence: true      # Enable data persistence
  snapshot_interval: 5.0        # Seconds between inventory snapshots
  expiration_days: 5            # Days until products expire
  
  # Sales attribution settings
  sales_confirm_intervals: 2    # Number of consecutive intervals to confirm sale
  sales_min_delta: 1            # Minimum quantity change to consider
  sales_cooldown_seconds: 10.0  # Cooldown between sales for same product

# Alert System Settings
alerts:
  # Enable/disable alert system
  enable_alerts: true
  
  # Number of consecutive intervals to confirm alert condition
  alert_confirm_intervals: 2
  
  # Cooldown between alerts for same product+type (seconds)
  # Default: 3600 (1 hour)
  alert_cooldown_seconds: 3600.0
  
  # Low stock thresholds per product
  # Alerts trigger when count falls below threshold for confirm_intervals
  low_stock_thresholds:
    mango: 3
    watermelon: 2
    pineapple: 2
    passion fruit: 2
    maui custard: 2
    lemon cake: 2
  
  # Email notification settings (via environment variables)
  # Set these in your environment:
  #   SMTP_HOST - SMTP server hostname (e.g., smtp.gmail.com)
  #   SMTP_PORT - SMTP server port (e.g., 587 for TLS)
  #   SMTP_USER - SMTP username/email
  #   SMTP_PASS - SMTP password or app-specific password
  #   NOTIFY_TO - Recipient email address
  #   NOTIFY_FROM - Sender email (optional, defaults to SMTP_USER)

# Web Server Settings
server:
  # Host address
  # '0.0.0.0' = accessible from all network interfaces
  # '127.0.0.1' = localhost only
  host: '0.0.0.0'
  
  # Port number
  port: 8080

# Video Streaming Settings
stream:
  # Target FPS for video stream
  # Lower = reduced CPU/GPU usage and bandwidth
  # Higher = smoother video but more resource intensive
  target_fps: 30

